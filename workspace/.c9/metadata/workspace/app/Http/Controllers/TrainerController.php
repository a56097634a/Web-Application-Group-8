{"changed":true,"filter":false,"title":"TrainerController.php","tooltip":"/app/Http/Controllers/TrainerController.php","value":"<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\n\nuse App\\Http\\Requests;\nuse App\\Trainer;\nuse App\\Gym;\nuse App\\TraineeDetail;\nuse App\\User;\nuse Auth;\nuse Redirect;\nuse DB;\n\nclass TrainerController extends Controller\n{\n    //\n    public function showProfile(){\n        $trainerId = Auth::id();\n        $trainer = Trainer::where('trainerId', $trainerId)->first();\n        $user = User::where('id', $trainerId)->first();\n        $gym = Gym::where('gymId', $trainer->gymId)->first();\n        return view('trainer.profile', ['trainer' => $trainer, 'user' => $user, 'gym' => $gym]);\n    }\n    \n    public function modifyProfile(){\n        $trainerId = Auth::id();\n        $trainer = Trainer::where('trainerId', $trainerId)->first();\n        $user = User::where('id', $trainerId)->first();\n        $gym = Gym::where('gymId', $trainer->gymId)->first();\n        $gyms = Gym::all();\n        return view('trainer.modify', ['trainer' => $trainer, 'user' => $user,'gym' => $gym, 'gyms' => $gyms]);\n    }\n\n    public function traineeList(){\n        $trainerId = Auth::id();\n        $trainer = Trainer::where('trainerId', $trainerId)->first();\n        $trainees = TraineeDetail::where('trainerId', $trainerId)->get();\n        $users = User::where('isTrainer', False)->get();\n        return view('trainer.traineeList', ['trainer' => $trainer, 'trainees' => $trainees, 'users' => $users]);\n    }    \n\n    public function store(Request $request){\n        $trainerId = Auth::id();\n        $trainer = Trainer::where('trainerId', $trainerId)->first();\n        $user = User::where('id', $trainerId)->first();\n        $user->contactNumber = $request->input('contactNumber');\n        $user->save();\n        \n        $trainer->gender = $request->input('gender');\n        $trainer->specialty = $request->input('speciality');\n        $trainer->gymId = $request->input('gymId');\n        $trainer->price= $request->input('price');\n        $trainer->save();\n        \n        return Redirect::to('/trainer/profile');\n    }\n    \n    public function TalkWithTrainee()\n    {\n        //$id = Auth::id();\n        return view('trainer.chatWithTrainee');\n        //, ['trainer' => Trainer::where('trainerId', $trainerId)->first(), 'trainee' => TraineeDetail::where('traineeId', $id)->first()]);\n    }\n    \n}\n","undoManager":{"mark":-2,"position":25,"stack":[[{"start":{"row":57,"column":5},"end":{"row":58,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":58,"column":0},"end":{"row":58,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":58,"column":4},"end":{"row":59,"column":0},"action":"insert","lines":["",""],"id":3},{"start":{"row":59,"column":0},"end":{"row":59,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":59,"column":4},"end":{"row":64,"column":5},"action":"insert","lines":["public function TalkWithTrainer()","    {","        //$id = Auth::id();","        return view('dashboard.chatWithTrainer');","        //, ['trainer' => Trainer::where('trainerId', $trainerId)->first(), 'trainee' => TraineeDetail::where('traineeId', $id)->first()]);","    }"],"id":4}],[{"start":{"row":59,"column":34},"end":{"row":59,"column":35},"action":"remove","lines":["r"],"id":5}],[{"start":{"row":59,"column":34},"end":{"row":59,"column":35},"action":"insert","lines":["e"],"id":6}],[{"start":{"row":59,"column":35},"end":{"row":59,"column":36},"action":"insert","lines":["e"],"id":7}],[{"start":{"row":59,"column":35},"end":{"row":59,"column":36},"action":"remove","lines":["e"],"id":8}],[{"start":{"row":62,"column":21},"end":{"row":62,"column":30},"action":"remove","lines":["dashboard"],"id":9},{"start":{"row":62,"column":21},"end":{"row":62,"column":22},"action":"insert","lines":["t"]}],[{"start":{"row":62,"column":22},"end":{"row":62,"column":23},"action":"insert","lines":["a"],"id":10}],[{"start":{"row":62,"column":23},"end":{"row":62,"column":24},"action":"insert","lines":["r"],"id":11}],[{"start":{"row":62,"column":23},"end":{"row":62,"column":24},"action":"remove","lines":["r"],"id":12}],[{"start":{"row":62,"column":22},"end":{"row":62,"column":23},"action":"remove","lines":["a"],"id":13}],[{"start":{"row":62,"column":22},"end":{"row":62,"column":23},"action":"insert","lines":["r"],"id":14}],[{"start":{"row":62,"column":23},"end":{"row":62,"column":24},"action":"insert","lines":["i"],"id":15}],[{"start":{"row":62,"column":24},"end":{"row":62,"column":25},"action":"insert","lines":["n"],"id":16}],[{"start":{"row":62,"column":24},"end":{"row":62,"column":25},"action":"remove","lines":["n"],"id":17}],[{"start":{"row":62,"column":23},"end":{"row":62,"column":24},"action":"remove","lines":["i"],"id":18}],[{"start":{"row":62,"column":23},"end":{"row":62,"column":24},"action":"insert","lines":["a"],"id":19}],[{"start":{"row":62,"column":24},"end":{"row":62,"column":25},"action":"insert","lines":["i"],"id":20}],[{"start":{"row":62,"column":25},"end":{"row":62,"column":26},"action":"insert","lines":["n"],"id":21}],[{"start":{"row":62,"column":26},"end":{"row":62,"column":27},"action":"insert","lines":["e"],"id":22}],[{"start":{"row":62,"column":27},"end":{"row":62,"column":28},"action":"insert","lines":["r"],"id":23}],[{"start":{"row":62,"column":43},"end":{"row":62,"column":44},"action":"remove","lines":["r"],"id":24}],[{"start":{"row":62,"column":43},"end":{"row":62,"column":44},"action":"insert","lines":["e"],"id":25}],[{"start":{"row":62,"column":44},"end":{"row":62,"column":45},"action":"insert","lines":["e"],"id":26}],[{"start":{"row":62,"column":44},"end":{"row":62,"column":45},"action":"remove","lines":["e"],"id":27}]]},"ace":{"folds":[],"scrolltop":565,"scrollleft":0,"selection":{"start":{"row":62,"column":47},"end":{"row":62,"column":47},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1462677857000}